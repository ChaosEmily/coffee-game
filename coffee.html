<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜ç« æ´™çš„å’–å•¡å±æ©Ÿ - Coffee Baum 758</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #D2B48C 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            padding: 40px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .screen {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        @keyframes scorePopup {
            0% { transform: scale(1.2); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #8B4513;
            padding-bottom: 20px;
        }

        .game-title {
            font-size: 32px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 5px;
        }

        .game-subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }

        .game-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
            background: linear-gradient(135deg, #F5E6D3 0%, #F9F1E8 100%);
            padding: 20px;
            border-radius: 12px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #D2B48C;
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            font-size: 11px;
            color: #999;
            text-transform: uppercase;
            margin-bottom: 8px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #8B4513;
            animation: scorePopup 0.6s ease;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #E8D4C0;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #D4AF37, #FFA500);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .season-badge {
            display: inline-block;
            background: #8B4513;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .dialogue-box {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFFAF0 100%);
            border-left: 5px solid #8B4513;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            line-height: 1.8;
            font-size: 15px;
            color: #333;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            animation: slideIn 0.6s ease;
        }

        .dialogue-box div {
            margin: 8px 0;
        }

        .speaker-name {
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 12px;
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .speaker-name::before {
            content: "ğŸ‘¤";
            margin-right: 8px;
            font-size: 16px;
        }

        .system-message {
            background: linear-gradient(135deg, #E8F4F8, #F0F8FC);
            border-left: 5px solid #2C5F7F;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-size: 14px;
            color: #2C5F7F;
            box-shadow: 0 2px 8px rgba(44, 95, 127, 0.1);
        }

        .event-notice {
            background: linear-gradient(135deg, #FFE6E6, #FFE0E0);
            border: 2px solid #E74C3C;
            padding: 18px;
            margin: 15px 0;
            border-radius: 10px;
            color: #C0392B;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.2);
            animation: pulse 2s infinite;
        }

        .event-title {
            font-size: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .options-section {
            margin: 30px 0;
        }

        .options-title {
            font-size: 18px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 20px;
            text-align: center;
        }

        .option-category {
            margin-bottom: 25px;
        }

        .category-label {
            font-size: 16px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 15px;
            display: block;
            padding-bottom: 10px;
            border-bottom: 2px solid #D2B48C;
        }

        .option-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 2px solid #D2B48C;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(139, 69, 19, 0.05);
            transition: left 0.3s ease;
        }

        .option-btn:hover {
            background: #FFF9E6;
            border-color: #8B4513;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(139, 69, 19, 0.15);
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn.selected {
            background: linear-gradient(135deg, #8B4513, #A0522D);
            color: white;
            border-color: #6B3410;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .option-btn.selected::after {
            content: 'âœ“';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            color: #FFD700;
            animation: scorePopup 0.4s ease;
        }

        .option-btn.selected .option-label {
            color: white;
        }

        .option-btn.selected .option-text {
            color: white;
        }

        .option-label {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .option-text {
            font-size: 13px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.4;
        }



        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            justify-content: center;
        }

        .btn {
            padding: 12px 30px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8B4513, #A0522D);
            color: white;
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #6B3410, #8B4513);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .btn-primary:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .btn-primary:disabled {
            background: #BFBFBF;
            cursor: not-allowed;
            transform: none;
            opacity: 0.6;
        }

        .btn-secondary {
            background: #D2B48C;
            color: #333;
        }

        .btn-secondary:hover {
            background: #B8956E;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .result-section {
            background: linear-gradient(135deg, #F0E6D2, #F5EBE0);
            border: 3px solid #8B4513;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .result-title {
            font-size: 26px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 15px;
        }

        .result-score {
            font-size: 20px;
            color: #333;
            margin: 12px 0;
            transition: all 0.4s ease;
        }

        .result-score.success {
            color: #27AE60;
            font-weight: bold;
            animation: scorePopup 0.6s ease;
        }

        .result-score.failure {
            color: #E74C3C;
            font-weight: bold;
            animation: pulse 1s ease-in-out;
        }

        .ending-dialogue {
            background: #FFF9E6;
            border-left: 5px solid #8B4513;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            line-height: 1.8;
            font-size: 15px;
        }

        .ending-title {
            font-size: 20px;
            font-weight: bold;
            color: #8B4513;
            margin-bottom: 15px;
            text-align: center;
        }

        .score-breakdown {
            background: linear-gradient(135deg, #F5E6D3, #F9F1E8);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 14px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .breakdown-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px 0;
            border-bottom: 1px solid #E8D4C0;
            transition: all 0.3s ease;
        }

        .breakdown-row:hover {
            background: rgba(139, 69, 19, 0.03);
            padding: 10px 8px;
            border-radius: 4px;
        }

        .breakdown-row:last-child {
            border-bottom: none;
        }

        .breakdown-label {
            font-weight: bold;
            color: #8B4513;
        }

        .breakdown-value {
            color: #333;
            font-weight: 600;
        }

        .breakdown-total {
            font-size: 16px;
            font-weight: bold;
            margin-top: 12px;
            padding: 12px 8px;
            border-top: 2px solid #8B4513;
            background: rgba(139, 69, 19, 0.05);
            border-radius: 4px;
        }

        .hidden {
            display: none !important;
        }



        @media (max-width: 768px) {
            .game-container {
                padding: 20px;
            }

            .game-title {
                font-size: 24px;
            }

            .option-buttons {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }
        }

        .season-description {
            background: #E8F4F8;
            border-left: 5px solid #2C5F7F;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-size: 15px;
            line-height: 1.6;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- éŠæˆ²é–‹å§‹ç•«é¢ -->
        <div id="startScreen" class="screen">
            <div class="game-header">
                <div class="game-title">â˜• é«˜ç« æ´™çš„å’–å•¡å±æ©Ÿ</div>
                <div class="game-subtitle">Coffee Baum 758 - ç¶“ç‡Ÿé¡§å•éŠæˆ²</div>
            </div>

            <div class="dialogue-box">
                <div class="speaker-name">é«˜ç« æ´™ï¼š</div>
                <div>ã€Œæ­¡è¿å…‰è‡¨ï¼Œè¬è¬ä½ é¡˜æ„åœ¨é€™å€‹ç©ºç„¡ä¸€äººçš„æ—©æ™¨ä¾†çœ‹æˆ‘ã€‚æˆ‘çš„åº—å«ã€Coffee Baum 758ã€ï¼Œåœ¨é€™è£¡æ’äº†å¿«å››å¹´ï¼Œæˆ‘å¿«æ’ä¸ä¸‹å»äº†ã€‚</div><br>
                <div>è«‹å¹«å¹«æˆ‘ï¼Œçµ¦æˆ‘ä¸€äº›å»ºè­°ï¼Œæˆ–è¨±æˆ‘çš„åº—é‚„èƒ½æœ‰ä¸€ç·šç”Ÿæ©Ÿâ€¦</div><br>
                <div>æˆ‘å€‘å¾æ˜¥å¤©é–‹å§‹ã€‚ã€</div>
            </div>

            <div class="game-stats">
                <div class="stat-box">
                    <div class="stat-label">ç´¯ç©ç¸½åˆ†</div>
                    <div class="stat-value">0 åˆ†</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">é€šéå›åˆ</div>
                    <div class="stat-value">0 / 4</div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="startGame()">é–‹å§‹ç¬¬ 1 å›åˆï¼šæ˜¥å­£</button>
            </div>
        </div>

        <!-- éŠæˆ²é€²è¡Œç•«é¢ -->
        <div id="gameScreen" class="screen hidden">
            <div class="game-header">
                <div class="game-title">â˜• é«˜ç« æ´™çš„å’–å•¡å±æ©Ÿ</div>
                <span class="season-badge" id="seasonBadge">æ˜¥å­£</span>
            </div>

            <div class="game-stats">
                <div class="stat-box">
                    <div class="stat-label">ç´¯ç©ç¸½åˆ†</div>
                    <div class="stat-value" id="cumulativeScore">0 åˆ†</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">é€šéå›åˆ</div>
                    <div class="stat-value" id="roundsProgress">0 / 4</div>
                </div>
            </div>

            <div id="seasonDescription" class="season-description"></div>

            <div id="eventContainer"></div>

            <div id="dialogueContainer"></div>

            <div class="options-section">
                <div class="options-title">è«‹çµ¦å‡ºä¸‰å€‹å»ºè­°ï¼ˆè£æ½¢ã€èœå–®ã€å“ç®¡å„é¸ä¸€å€‹ï¼‰ï¼š</div>
                
                <div class="option-category">
                    <label class="category-label">ğŸ  è£æ½¢</label>
                    <div class="option-buttons" id="decorationOptions"></div>
                </div>

                <div class="option-category">
                    <label class="category-label">ğŸ“‹ èœå–®</label>
                    <div class="option-buttons" id="menuOptions"></div>
                </div>

                <div class="option-category">
                    <label class="category-label">âœ… å“è³ªæ§ç®¡</label>
                    <div class="option-buttons" id="qualityOptions"></div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" id="submitBtn" onclick="submitRound()" disabled>æäº¤å»ºè­°</button>
            </div>
        </div>

        <!-- å›åˆçµç®—ç•«é¢ -->
        <div id="resultScreen" class="screen hidden">
            <div class="game-header">
                <div class="game-title">â˜• å›åˆçµç®—</div>
            </div>

            <div id="resultContent"></div>

            <div class="button-group">
                <button class="btn btn-primary" id="nextBtn" onclick="nextRound()">ç¹¼çºŒ</button>
            </div>
        </div>

        <!-- éŠæˆ²çµæŸç•«é¢ -->
        <div id="endScreen" class="screen hidden">
            <div class="game-header">
                <div class="game-title">â˜• éŠæˆ²çµæŸ</div>
            </div>

            <div id="endContent"></div>

            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #D2B48C; font-size: 12px; color: #999; text-align: center;">
                <div style="margin-bottom: 8px;">è³‡æ–™ä¾†æºï¼šç´ç´„æ™‚å ±</div>
                <a href="https://www.nytimes.com/interactive/2025/12/03/world/asia/south-korea-coffee-shops.html" target="_blank" style="color: #8B4513; text-decoration: none; word-break: break-all;">https://www.nytimes.com/interactive/2025/12/03/world/asia/south-korea-coffee-shops.html</a>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="location.reload()">é‡æ–°é–‹å§‹</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== éŠæˆ²æ•¸æ“š ====================
        const SEASONS = ['æ˜¥å­£', 'å¤å­£', 'ç§‹å­£', 'å†¬å­£'];
        
        const SEASON_DESCRIPTIONS = {
            'æ˜¥å­£': 'ã€Œä½ çœ‹çœ‹å¤–é¢ï¼Œå¤©æ°£é€™éº¼å¥½ï¼Œä½†åº—è£¡é‚„æ˜¯ç©ºè•©è•©ã€‚å°è¡—é‚£å®¶æ–°é–‹çš„åº—ï¼Œé–€å£åˆæ’èµ·éšŠäº†ï¼Œä¸çŸ¥é“ä»–å€‘åˆ°åº•æœ‰ä»€éº¼é­”åŠ›ï¼Ÿç•¶åˆæˆ‘ä»¥ç‚ºé€™è¡Œä¸é›£ï¼Œç•¢ç«Ÿä¸ç”¨ä»€éº¼åŸ·ç…§ï¼Œæˆæœ¬ä¹Ÿæ¯”é–‹é¤å»³ä½ã€‚ä½†ç¾åœ¨é™„è¿‘è¶…é 50 å®¶åº—ï¼Œæ ¹æœ¬æ˜¯åœ°ç„ï¼ä½ çŸ¥é“å—ï¼Œå¾ˆå¤šå®¢äººæ ¹æœ¬ä¸æ˜¯ä¾†å–å’–å•¡çš„ï¼Œä»–å€‘åªæ˜¯æƒ³æ‰¾å€‹åœ°æ–¹å¾…è‘—ï¼Œå› ç‚ºå®¶è£¡å¤ªå°äº†ï¼Œé€£ç´„æœ‹å‹ä¾†éƒ½é›£ã€‚æˆ‘å¾—æƒ³è¾¦æ³•ï¼Œè®“ä»–å€‘é¡˜æ„åœ¨æˆ‘é€™è£¡å¤šå¾…ä¸€é»æ™‚é–“â€¦ã€',
            'å¤å­£': 'ã€Œå¤å¤©ä¾†äº†ï¼Œæ¯å¤©ä¸€çœçœ¼å°±æ˜¯å†°ç¾å¼ã€å†°ç¾å¼ã€å†°ç¾å¼ï¼é€™ç°¡ç›´æˆäº†æˆ‘å€‘çš„ã€åœ‹æ°‘é£²æ–™ã€ï¼Œä½†ä¾†å¾—å¿«å»å¾—ä¹Ÿå¿«ï¼Œæ¯æ¯åˆ©æ½¤çœŸçš„ä¸é«˜å•Šã€‚ä½ çŸ¥é“æˆ‘ä¸€å¤©å·¥ä½œå¤šä¹…å—ï¼Ÿè¶…é 13 å€‹å°æ™‚ï¼å¾æ—©ä¸Šé–‹åº—åˆ°æ™šä¸Šé—œé–€ï¼Œè…°éƒ½å¿«ç›´ä¸èµ·ä¾†äº†ã€‚å¦‚æœèƒ½å¤šè«‹å€‹äººå¹«å¿™è©²å¤šå¥½ï¼Œä½†æˆ‘é€£å¤šä»˜ä¸€å€‹äººçš„æœ€ä½å·¥è³‡éƒ½å¾—çœè‘—é»èŠ±â€¦ æˆ‘å¾—æƒ³æƒ³è¾¦æ³•ï¼Œæ€éº¼åœ¨ä¸ç´¯æ­»è‡ªå·±çš„æƒ…æ³ä¸‹ï¼Œæ›´å¿«åœ°æŠŠé‚£äº›å†°ç¾å¼é€å‡ºå»ã€‚ã€',
            'ç§‹å­£': 'ã€Œæˆ‘æœ‰é»çµ•æœ›äº†ã€‚å…‰æ˜¯æä¾›ä¸€æ¯å¥½å’–å•¡ï¼Œç¾åœ¨æ ¹æœ¬ä¸å¤ ï¼éš”å£é‚£å®¶æ–°é–‹çš„åº—ï¼Œé€£ä»–å€‘å®¶çš„èœå–®æ’ç‰ˆå’Œç‡ˆå…‰é¢¨æ ¼éƒ½è·Ÿæˆ‘ä¸€æ¨¡ä¸€æ¨£ï¼Œæ ¹æœ¬åˆ†ä¸å‡ºèª°æ˜¯èª°ï¼ç¾åœ¨çš„å®¢äººï¼Œä»–å€‘ä¸æ˜¯ä¾†ã€å–ã€å’–å•¡çš„ï¼Œæ˜¯ä¾†ã€æ‹ã€å’–å•¡ã€ä¾†ã€ç™¼ã€Instagram çš„ã€‚å¦‚æœæˆ‘çš„åº—æ‹èµ·ä¾†ä¸å¤ å¥½çœ‹ï¼Œè²¼æ–‡å¾—ä¸åˆ°ç€è¦½æ¬¡æ•¸ï¼Œé‚£æˆ‘å°±å®Œäº†ã€‚å´”é¡§å•èªªå¾—å°ï¼Œæˆ‘å¿…é ˆæ‡‚è¡ŒéŠ·ã€æ‡‚è¨­è¨ˆã€æ‡‚èœå–®é–‹ç™¼ï¼Œæˆ‘çœŸçš„åªæ˜¯å€‹æƒ³å¥½å¥½åšå’–å•¡çš„äººå•Šâ€¦ã€',
            'å†¬å­£': 'ã€Œå†¬å¤©åˆ°äº†ï¼Œå–æš–è²»åˆæ˜¯ä¸€ç­†é–‹éŠ·ã€‚æœ€å¯æ€•çš„æ˜¯é‚£äº›ä½åƒ¹é€£é–åº—ï¼Œä»–å€‘å°±åƒå¸è¡€é¬¼ä¸€æ¨£ï¼Œç”¨è¶…ä½çš„åƒ¹æ ¼æ¶èµ°æˆ‘çš„å®¢äººï¼Œæˆ‘æ€éº¼è·Ÿä»–å€‘æ‹šï¼Ÿæˆ‘çš„ç§Ÿç´„å°±å¿«åˆ°æœŸäº†ï¼Œæˆ‘å¸¸å¸¸æ„Ÿåˆ°çµ•æœ›ï¼Œä¸çŸ¥é“è‡ªå·±æ˜¯å¦é‚„èƒ½ç¹¼çºŒç•¶å’–å•¡å¸«â€¦ æ˜¨å¤©é‚„çœ‹åˆ°ä¸€å€‹ YouTube å½±ç‰‡ï¼Œæ˜¯åå»šå‹¸å¤§å®¶ä¸è¦é–‹å’–å•¡é¤¨ã€‚é›£é“æˆ‘çœŸçš„èµ°éŒ¯è·¯äº†å—ï¼Ÿæˆ‘è©²å …æŒä¸‹å»ï¼Œå°ˆæ³¨æˆ‘çš„å°ˆæ¥­ï¼Œé‚„æ˜¯ä¹¾è„†èªè¼¸ï¼Œé€€å‡ºé€™å€‹å¸‚å ´ï¼Ÿã€'
        };

        const BASE_SCORES = {
            'æ˜¥å­£': {
                'è£æ½¢': { 'A': 3, 'B': 1, 'C': -1 },
                'èœå–®': { 'A': 3, 'B': 1, 'C': -1 },
                'å“ç®¡': { 'A': 1, 'B': -1, 'C': 3 }
            },
            'å¤å­£': {
                'è£æ½¢': { 'A': 1, 'B': 3, 'C': -1 },
                'èœå–®': { 'A': 3, 'B': 1, 'C': -1 },
                'å“ç®¡': { 'A': 3, 'B': 1, 'C': -1 }
            },
            'ç§‹å­£': {
                'è£æ½¢': { 'A': -1, 'B': 3, 'C': 1 },
                'èœå–®': { 'A': 1, 'B': 1, 'C': 3 },
                'å“ç®¡': { 'A': 3, 'B': 1, 'C': -1 }
            },
            'å†¬å­£': {
                'è£æ½¢': { 'A': 1, 'B': -1, 'C': 3 },
                'èœå–®': { 'A': 3, 'B': 1, 'C': -1 },
                'å“ç®¡': { 'A': 3, 'B': 1, 'C': -1 }
            }
        };

        const OPTIONS_TEXT = {
            'æ˜¥å­£': {
                'è£æ½¢': {
                    'A': 'æ‰“é€  Instagrammable ä¸»é¡Œç©ºé–“ï¼ˆäº®è‰²ç³»ã€ç¶ è‰²æ¤ç‰©ã€æ‹ç…§è§’è½ï¼‰',
                    'B': 'é€²è¡ŒåŸºç¤ç¿»æ–°ï¼ˆé‡æ¼†ç‰†å£ã€æ›´æ›ç‡ˆå…·ã€æ¸…æ½”æ•´ç†ï¼‰',
                    'C': 'ç¶­æŒç¾ç‹€ï¼Œä½†å¢åŠ èˆ’é©åº¦ï¼ˆåŠ å¢Šå­ã€èª¿æ•´åº§ä½ã€æ”¹å–„é€šé¢¨ï¼‰'
                },
                'èœå–®': {
                    'A': 'è·Ÿé¢¨æ¨å‡ºæ–°å‹æ…‹ç”œé»ï¼ˆçå¥¶ææ‹‰ç±³è˜‡ã€ç¶²ç´…é™å®šé£²å“ï¼‰',
                    'B': 'ä¿æŒå‚³çµ±å’–å•¡ç‚ºä¸»ï¼Œè¼”ä»¥ç°¡å–®ç”œé»',
                    'C': 'å¤§å¹…æ”¹é©èœå–®ï¼ˆæ¨å‡ºå­£ç¯€é™å®šã€åœ°æ–¹ç‰¹è‰²é£²å“ï¼‰'
                },
                'å“ç®¡': {
                    'A': 'é™ä½æ¡è³¼æˆæœ¬ï¼ˆå°‹æ‰¾ä¾¿å®œè±†å•†ã€èª¿æ•´å“è³ªæ¨™æº–ï¼‰',
                    'B': 'ä¿æŒä¸­ç­‰å“è³ªï¼Œåš´æ ¼æ§ç®¡æµªè²»',
                    'C': 'æŠ•è³‡å„ªè³ªå’–å•¡è±†ï¼ˆè¿½æ±‚ç²¾å“å’–å•¡å½¢è±¡ï¼‰'
                }
            },
            'å¤å­£': {
                'è£æ½¢': {
                    'A': 'å¼·èª¿æ¶¼çˆ½æ„Ÿï¼ˆå†·è‰²ç³»ã€å†·æ°£åŠ å¼·ã€å†°æ¶¼è¦–è¦ºè£é£¾ï¼‰',
                    'B': 'æé«˜å‡ºé¤æ•ˆç‡ï¼ˆæ”¹å–„å§å°é…ç½®ã€åŠ å¿«æµç¨‹ã€å„ªåŒ–ç©ºé–“ï¼‰',
                    'C': 'ä¿æŒèˆ’é©æ€§ï¼ˆå¢åŠ æ¶¼é¢¨åº§ä½ã€æ”¹å–„å‹•ç·šï¼‰'
                },
                'èœå–®': {
                    'A': 'æ¨å‡ºé«˜åˆ©æ½¤ç‰¹èª¿ï¼ˆé™å®šå†°æ²™ã€ç‰¹è‰²å†°ç¾å¼ï¼‰',
                    'B': 'å¼·åŒ–å†°ç¾å¼éŠ·å”®ï¼ˆæ‰“é€ åœ‹æ°‘é£²å“å½¢è±¡ã€æé«˜å–®åƒ¹ï¼‰',
                    'C': 'å¤šæ¨£åŒ–å˜—è©¦ï¼ˆå¢åŠ æ–°é£²å“ã€è©¦é©—æ–°çµ„åˆï¼‰'
                },
                'å“ç®¡': {
                    'A': 'æŠ•å…¥å“¡å·¥åŸ¹è¨“ï¼ˆæå‡æ•ˆç‡ã€æ¸›å°‘è€é—†å·¥æ™‚ã€åˆæ³•æ”¹å–„å‹å‹•æ¢ä»¶ï¼‰',
                    'B': 'åŸºç¤åŸæ–™æª¢æ¸¬ï¼ˆå®šæœŸæª¢æŸ¥é£Ÿææ–°é®®åº¦ã€è¡›ç”Ÿç®¡ç†ï¼‰',
                    'C': 'ç°¡åŒ–æ“ä½œæµç¨‹ï¼ˆç”¨ä»£å·¥å“æ›¿ä»£è‡ªè£½ã€é™ä½é›£åº¦ï¼‰'
                }
            },
            'ç§‹å­£': {
                'è£æ½¢': {
                    'A': 'ç…§æ¬æµè¡Œè¨­è¨ˆï¼ˆè·Ÿé¢¨æœ€æ–°å’–å•¡å»³é¢¨æ ¼ã€ç°¡ç´„åŒ—æ­é¢¨ï¼‰',
                    'B': 'èå…¥åœ¨åœ°æ–‡åŒ–ï¼ˆåœ°æ–¹ç‰¹è‰²ã€æ–‡è—æ°›åœã€ç¤¾å€æ•…äº‹ï¼‰',
                    'C': 'å¼·åŒ–èˆ’é©æ„Ÿï¼ˆæœ¨è³ªè£é£¾ã€æº«æš–è‰²èª¿ã€éŸ³æ¨‚æ°›åœï¼‰'
                },
                'èœå–®': {
                    'A': 'æ¨å‡ºé«˜åˆ©æ½¤ç‰¹èª¿ï¼ˆç²¾å“å’–å•¡ã€å†·èƒç‰¹èª¿ï¼‰',
                    'B': 'ç¶­æŒç©©å®šèœå–®ï¼ˆå¯é å“è³ªã€å®¢æˆ¶ä¿¡ä»»ï¼‰',
                    'C': 'æ¨å‡ºæ‹èµ·ä¾†å¥½çœ‹é£²å“ï¼ˆè¦–è¦ºå¸å¼•ã€ç¤¾ç¾¤å‚³æ’­åŠ›å¼·ï¼‰'
                },
                'å“ç®¡': {
                    'A': 'èˆ‡ KOL / ç¶²ç´…åˆä½œï¼ˆé‚€è«‹åˆä½œã€æå‡çŸ¥ååº¦ï¼‰',
                    'B': 'å£ç¢‘è¡ŒéŠ·ï¼ˆé¼“å‹µé¡§å®¢åˆ†äº«ã€å»ºç«‹è©•è«–ï¼‰',
                    'C': 'è¡ŒéŠ·æŠ•è³‡ï¼ˆå»£å‘Šã€ç¤¾ç¾¤æ¨å»£ã€äº‹ä»¶è¡ŒéŠ·ï¼‰'
                }
            },
            'å†¬å­£': {
                'è£æ½¢': {
                    'A': 'å¼·åŒ–æš–è‰²èª¿è£é£¾ï¼ˆæº«æš–ç‡ˆå…‰ã€èˆ’é©å¸ƒç½®ã€å£çˆæ„Ÿï¼‰',
                    'B': 'ç°¡æ½”æ¸…çˆ½é¢¨æ ¼ï¼ˆåŒ—æ­ç°¡ç´„ã€ç¾ä»£æ„Ÿã€æ•´æ½”æ˜äº®ï¼‰',
                    'C': 'å»ºç«‹æœƒå“¡å¿ èª è¨ˆç•«ï¼ˆæ‰“å¡é›†é»ã€æœƒå“¡å°ˆå±¬ã€å›é ­å®¢çå‹µï¼‰'
                },
                'èœå–®': {
                    'A': 'æ¨å‡ºé«˜æ€§åƒ¹æ¯”å¥—é¤ï¼ˆé£²å“ + é»å¿ƒçµ„åˆã€è¶…å€¼çµ„åˆï¼‰',
                    'B': 'å¤šæ¨£åŒ–ç”œé»é¸æ“‡ï¼ˆæ‡‰å°ä¸åŒå®¢ç¾¤ã€æé«˜å®¢å–®åƒ¹ï¼‰',
                    'C': 'é™å®šå†¬å­£é£²å“ï¼ˆç†±é£²ä¸»æ‰“ã€å­£ç¯€ç‰¹è‰²ï¼‰'
                },
                'å“ç®¡': {
                    'A': 'ä¿æŒå“è³ªå …æŒï¼ˆé¸æ“‡å„ªè³ªè±†å­ã€å°ˆæ¥­æ¨™æº–ã€è·äººç²¾ç¥ï¼‰',
                    'B': 'å®¢æˆ¶æœå‹™å„ªåŒ–ï¼ˆå‹å–„æ…‹åº¦ã€å€‹äººåŒ–æœå‹™ã€è¨˜ä½å¸¸å®¢ï¼‰',
                    'C': 'æˆæœ¬å„ªåŒ–èˆ‡å“è³ªå¹³è¡¡ï¼ˆç²¾é¸ç¶“æ¿Ÿè±†ã€ç©©å®šå‡ºå“ã€ç¶­æŒå°ˆæ¥­å½¢è±¡ï¼‰'
                }
            }
        };

        const EVENTS = [
            {
                id: 1,
                name: 'å’–å•¡è±†åƒ¹æ ¼é£†å‡',
                description: 'ã€Œä½ è½åˆ°æœ€æ–°çš„æ¶ˆæ¯äº†å—ï¼Ÿå…¨çƒå’–å•¡è±†ç”¢åœ°å› å¤©ç½æ¸›ç”¢ï¼Œå’–å•¡è±†åƒ¹æ ¼æš´æ¼² 30%ï¼é€™å°æˆ‘å€‘é€™ç¨®å–®ç¨é€²è²¨çš„å°åº—ä¾†èªªç°¡ç›´æ˜¯è‡´å‘½æ‰“æ“Šï¼Œåˆ©æ½¤ç©ºé–“è¢«åš´é‡å£“ç¸®äº†ï¼ã€',
                modifiers: [
                    { season: 'æ˜¥å­£', category: 'å“ç®¡', option: 'C', delta: 2, reasoning: 'æ‡‰å°æˆæœ¬è¡æ“Šï¼Œæ•ˆç›Šæ¥µé«˜' },
                    { season: 'æ˜¥å­£', category: 'èœå–®', option: 'B', delta: -2, reasoning: 'é«˜å“è³ªè±†å­æˆæœ¬é›£ä»¥æ‰¿æ“”' }
                ],
                used: false
            },
            {
                id: 2,
                name: 'ç¶²ç´…æ¢åº—è¡æ“Š',
                description: 'ã€Œå¤©å•Šï¼Œæ˜¨å¤©ä¸€ä½æ“æœ‰æ•¸åè¬ç²‰çµ²çš„ç¶²ç´…ä¾†æˆ‘å€‘åº—è£¡ï¼Œä½†å¥¹åœ¨ IG é™æ™‚å‹•æ…‹æŠ±æ€¨ã€åº—è£¡å…‰ç·šå¤ªæš—ï¼Œæ‹ä¸å‡ºç†æƒ³çš„ç…§ç‰‡ã€ã€‚é›–ç„¶å¥¹æ²’æŒ‡åé“å§“ï¼Œä½†æµé‡å°±æ˜¯ä¸€åˆ‡ï¼Œæˆ‘å€‘å¿…é ˆè®“åº—é¢æ›´ä¸Šç›¸ï¼ã€',
                modifiers: [
                    { season: 'æ˜¥å­£', category: 'è£æ½¢', option: 'A', delta: 2, reasoning: 'è§£æ±ºç‡ƒçœ‰ä¹‹æ€¥ï¼Œå¸¶ä¾†å·¨å¤§æ›å…‰æ©Ÿæœƒ' },
                    { season: 'ç§‹å­£', category: 'è£æ½¢', option: 'A', delta: 2, reasoning: 'è§£æ±ºç‡ƒçœ‰ä¹‹æ€¥ï¼Œå¸¶ä¾†å·¨å¤§æ›å…‰æ©Ÿæœƒ' },
                    { season: 'ç§‹å­£', category: 'å“ç®¡', option: 'A', delta: -2, reasoning: 'ç¶²ç´…å·²ç¶“ä¾†éäº†ï¼Œç¾åœ¨é‡é»æ˜¯è¦–è¦ºç’°å¢ƒ' }
                ],
                used: false
            },
            {
                id: 3,
                name: 'æ”¿åºœå·¥æ™‚ç¨½æŸ¥',
                description: 'ã€Œè€é—†æˆ‘æ”¶åˆ°è­¦å‘Šäº†ï¼æ”¿åºœæœ€è¿‘åŠ å¼·äº†å°é¤é£²æ¥­çš„å‹å‹•å·¥æ™‚ç¨½æŸ¥ï¼Œç½°æ¬¾éå¸¸é‡ï¼ä½ çŸ¥é“æˆ‘å·²ç¶“æ¯å¤©å·¥ä½œè¶…é 13 å€‹å°æ™‚äº†ï¼Œæˆ‘å€‘å¾—æƒ³å€‹åˆæ³•çš„è¾¦æ³•æ¸›å°‘æˆ‘çš„å·¥ä½œæ™‚é–“ï¼Œä¸ç„¶æˆ‘å¯èƒ½è¦åƒç½°å–®äº†ã€‚ã€',
                modifiers: [
                    { season: 'å¤å­£', category: 'å“ç®¡', option: 'A', delta: 2, reasoning: 'åŸ¹è¨“å“¡å·¥ä»¥åˆæ³•æ¸›å°‘è€é—†å·¥æ™‚ï¼Œæ•ˆç›Šå¤§å¢' },
                    { season: 'ç§‹å­£', category: 'å“ç®¡', option: 'A', delta: 2, reasoning: 'åŸ¹è¨“å“¡å·¥ä»¥åˆæ³•æ¸›å°‘è€é—†å·¥æ™‚ï¼Œæ•ˆç›Šå¤§å¢' },
                    { season: 'å¤å­£', category: 'è£æ½¢', option: 'B', delta: -2, reasoning: 'æ•ˆç‡æå‡ä½†ç„¡æ³•è§£æ±ºè€é—†è¶…æ™‚å•é¡Œ' }
                ],
                used: false
            },
            {
                id: 4,
                name: 'é€£é–åº—æ¥µé™ä¿ƒéŠ·',
                description: 'ã€Œé€£é–åº—çœŸçš„å¤ªç‹ äº†ï¼å°é¢çš„å¤§å‹é€£é–å“ç‰Œæ¨å‡ºäº†ã€å†°ç¾å¼è²·ä¸€é€ä¸€ï¼Œé™æ™‚ä¸‰å¤©ã€æ´»å‹•ï¼æˆ‘çš„å†°ç¾å¼ç°¡ç›´è³£ä¸å‹•äº†ï¼Œä»–å€‘æ­£åœ¨ç”¨æ¥µä½çš„åƒ¹æ ¼æ‘§æ¯€å¸‚å ´ï¼Œæˆ‘å€‘ä¸èƒ½è·Ÿè‘—è³ æœ¬å•Šï¼ã€',
                modifiers: [
                    { season: 'å¤å­£', category: 'èœå–®', option: 'B', delta: -3, reasoning: 'ä½åƒ¹ç«¶çˆ­ä¸‹ï¼Œæ­¤é …æˆç‚ºè² è³‡ç”¢' },
                    { season: 'å†¬å­£', category: 'èœå–®', option: 'A', delta: 2, reasoning: 'æä¾›æœ‰ç«¶çˆ­åŠ›ä¸”èƒ½å¸¶ä¾†åˆ©æ½¤çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ•ˆç›Šæ¥µé«˜' }
                ],
                used: false
            },
            {
                id: 5,
                name: 'åœ¨åœ°æ–‡åŒ–åª’é«”å°ˆè¨ª',
                description: 'ã€Œæœ‰æ©Ÿæœƒäº†ï¼åœ°æ–¹åª’é«”æ­£åœ¨ç‚ºä¸€ç¯‡é—œæ–¼ã€ç¤¾å€ç¨ç«‹å°åº—ã€çš„å°ˆé¡Œå°‹æ‰¾æ¡è¨ªå°è±¡ã€‚ä»–å€‘å°é‚£äº›æœ‰æ•…äº‹ã€èƒ½é«”ç¾åœ¨åœ°æ–‡åŒ–çš„åº—æœ€æœ‰èˆˆè¶£ã€‚å¦‚æœèƒ½è¢«é¸ä¸Šï¼Œæˆ‘å€‘çš„çŸ¥ååº¦è‚¯å®šæœƒå¤§å¢ï¼ã€',
                modifiers: [
                    { season: 'ç§‹å­£', category: 'è£æ½¢', option: 'B', delta: 2, reasoning: 'ç²å¾—åª’é«”å…è²»æ›å…‰çš„æ©Ÿæœƒæ¥µå¤§' },
                    { season: 'ç§‹å­£', category: 'è£æ½¢', option: 'A', delta: -2, reasoning: 'èˆ‡åª’é«”å°‹æ‰¾çš„ç›®æ¨™èƒŒé“è€Œé¦³' }
                ],
                used: false
            },
            {
                id: 6,
                name: 'ç«¶çˆ­è€…è¨­è¨ˆé›·åŒ',
                description: 'ã€Œæˆ‘çœŸçš„è¦ç˜‹äº†ï¼è¡—è§’é‚£å®¶æ–°é–‹çš„åº—ï¼Œé€£ä»–å€‘å®¶çš„èœå–®æ’ç‰ˆå’Œç‡ˆå…‰é¢¨æ ¼éƒ½è·Ÿæˆ‘ä¸€æ¨¡ä¸€æ¨£ï¼é¡§å®¢æ ¹æœ¬åˆ†ä¸å‡ºèª°æ˜¯èª°ï¼æˆ‘èŠ±äº†é€™éº¼å¤šå¿ƒæ€è£æ½¢ï¼Œçµæœä¸€é»å€åˆ¥éƒ½æ²’æœ‰ï¼Œæˆ‘è©²æ€éº¼æ‰èƒ½çœŸæ­£è·³å‡ºä¾†ï¼Ÿã€',
                modifiers: [
                    { season: 'ç§‹å­£', category: 'èœå–®', option: 'C', delta: 2, reasoning: 'å¤–è§€å·®ç•°åŒ–æˆç‚ºè„«ç©è€Œå‡ºçš„é—œéµ' },
                    { season: 'å¤å­£', category: 'èœå–®', option: 'A', delta: -2, reasoning: 'è‹¥å¤–è§€ç›¸ä¼¼ï¼Œåˆ©æ½¤é«˜çš„ç‰¹èª¿ä¹Ÿå®¹æ˜“è¢«æ¨¡ä»¿' }
                ],
                used: false
            },
            {
                id: 7,
                name: 'æ¥µç«¯æ°£å€™è¡æ“Š',
                description: 'ã€Œé€™é€±çš„å¤©æ°£é å ±é¡¯ç¤ºï¼Œå³å°‡è¿ä¾†æ­·å²ç½•è¦‹çš„é€£çºŒé™é›¨å’Œä½æº«ã€‚é¡§å®¢ä¸€å®šæœƒå¸Œæœ›åœ¨æˆ‘å€‘é€™è£¡ç²å¾—æœ€æº«æš–èˆ’é©çš„é«”é©—ï¼Œè€Œä¸æ˜¯å†·å†°å†°ã€æ¿•æ¼‰æ¼‰çš„æ„Ÿè¦ºã€‚ã€',
                modifiers: [
                    { season: 'å†¬å­£', category: 'è£æ½¢', option: 'A', delta: 2, reasoning: 'èˆ’é©æ°›åœæˆç‚ºç•¶å­£é¦–è¦å¸å¼•åŠ›' },
                    { season: 'å†¬å­£', category: 'è£æ½¢', option: 'C', delta: -2, reasoning: 'å¤©æ°£å› ç´ æ¯”å¿ èª åº¦æ›´èƒ½å½±éŸ¿çŸ­æœŸå®¢æµ' }
                ],
                used: false
            },
            {
                id: 8,
                name: 'é¡§å®¢é—œä¿‚å±æ©Ÿ',
                description: 'ã€Œæ˜¨å¤©æœ‰é¡§å®¢åœ¨ç¶²è·¯ä¸Šç•™è¨€ï¼ŒæŠ±æ€¨æˆ‘å€‘é›–ç„¶ç©ºé–“èˆ’é©ï¼Œä½†æœå‹™æ…‹åº¦ä¸å¤ ç©æ¥µï¼Œæ²’æœ‰æ„Ÿå—åˆ°å°ˆå±¬æ„Ÿã€‚åœ¨é€™å€‹ç¤¾ç¾¤æ™‚ä»£ï¼Œé¡§å®¢çš„å¿ èª åº¦æ¯”ä»€éº¼éƒ½é‡è¦ï¼æˆ‘å€‘å¿…é ˆè®“ä»–å€‘æ„Ÿè¦ºåˆ°èˆ‡çœ¾ä¸åŒï¼ã€',
                modifiers: [
                    { season: 'å†¬å­£', category: 'è£æ½¢', option: 'C', delta: 2, reasoning: 'ç·Šæ€¥å»ºç«‹é¡§å®¢é—œä¿‚ï¼Œæ•ˆç›Šå¤§å¢' },
                    { season: 'å¤å­£', category: 'å“ç®¡', option: 'B', delta: -2, reasoning: 'è§£æ±ºæœå‹™å•é¡Œæ¯”åŸæ–™æ›´é‡è¦' }
                ],
                used: false
            }
        ];

        const ROUND_FEEDBACK = {
            'æ˜¥å­£': {
                'é«˜å½±éŸ¿_ç¤¾äº¤è¨­è¨ˆ': {
                    'success': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œè¨±å¤šäººä½åœ¨ç‹¹å°çš„å…¬å¯“è£¡... å’–å•¡é¤¨æä¾›äº†æƒ…ä¾¶å€‘æ™šé¤å¾Œå¯ä»¥æµé€£ã€è€æœ‹å‹å¯ä»¥æ•˜èˆŠã€å­¸ç”Ÿå¯ä»¥ç†¬å¤œè®€æ›¸ï¼Œä»¥åŠä»»ä½•äººéƒ½å¯ä»¥ç¨è‡ªåè‘—æ»‘æ‰‹æ©Ÿè€Œä¸å—æ‰“æ“¾çš„ç©ºé–“ã€‚ã€ï¼ˆè­‰æ˜ç­–ç•¥æ–¹å‘æ­£ç¢ºï¼‰',
                    'failure': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œå’–å•¡é¤¨çš„å‰µæ¥­æˆæœ¬æ¯”é…’å§å’Œé¤å»³ç­‰å…¶ä»–ç†±é–€é¸æ“‡ä½ï¼Œè€Œä¸”ä¸éœ€è¦ç‰¹æ®Šçš„å’–å•¡å¸«åŸ·ç…§ã€‚ã€ï¼ˆé»å‡ºå‰µæ¥­é–€æª»ä½ï¼Œç«¶çˆ­è€…çœ¾å¤šï¼‰'
                },
                'é«˜å½±éŸ¿_æˆæœ¬æ§åˆ¶': {
                    'success': 'ã€æ•¸æ“šè³‡æ–™ã€‘ã€Œå´”å…ˆç”Ÿèªªï¼Œè¨±å¤šåº—ä¸»æ¯æœˆæ·¨æ”¶å…¥åƒ… 2,700 è‡³ 3,400 ç¾å…ƒï¼Œç•¥é«˜æ–¼æœ€ä½å·¥è³‡ã€‚è€Œé€™é‚„æ˜¯ä»–å€‘æ¯å¤©å·¥ä½œè¶…é 13 å°æ™‚æ‰€æ›ä¾†çš„ã€‚ã€ï¼ˆå¼·èª¿æˆæœ¬æ§åˆ¶å°å¾®è–„åˆ©æ½¤çš„é‡è¦æ€§ï¼‰',
                    'failure': 'ã€æ•¸æ“šè³‡æ–™ã€‘ã€Œç•¶é«˜å…ˆç”Ÿæ–¼ 2016 å¹´é–‹è¨­ä»–çš„å’–å•¡é¤¨æ™‚ï¼Œç•¶æ™‚å¹¾ç™¾è‹±å°ºå…§åªæœ‰å¦å¤–å…©å®¶å’–å•¡åº—ã€‚å¾é‚£æ™‚èµ·ï¼Œå’–å•¡é¤¨åœ¨éŸ“åœ‹åŸå¸‚ä¸­éš¨è™•å¯è¦‹ï¼Œéå»å…­å¹´å…¨åœ‹æ•¸é‡ç¿»äº†ä¸€å€ã€‚ã€ï¼ˆå¼·èª¿ç’°å¢ƒå·²è®Šï¼Œç«¶çˆ­æ¿€çƒˆï¼‰'
                }
            },
            'å¤å­£': {
                'é«˜å½±éŸ¿_æ•ˆç‡åŸ¹è¨“': {
                    'success': 'ã€æ•¸æ“šè³‡æ–™ã€‘ã€Œå´”å…ˆç”Ÿèªªï¼Œè¨±å¤šåº—ä¸»æ¯æœˆæ·¨æ”¶å…¥åƒ… 2,700 è‡³ 3,400 ç¾å…ƒ... è€Œé€™é‚„æ˜¯ä»–å€‘æ¯å¤©å·¥ä½œè¶…é 13 å°æ™‚æ‰€æ›ä¾†çš„ã€‚ã€ï¼ˆè­‰æ˜æ•ˆç‡æ”¹å–„ï¼Œç·©è§£é•·å·¥æ™‚å•é¡Œï¼‰',
                    'failure': 'ã€æ•¸æ“šè³‡æ–™ã€‘ã€Œå´”å…ˆç”Ÿèªªï¼Œè¨±å¤šåº—ä¸»æ¯æœˆæ·¨æ”¶å…¥åƒ… 2,700 è‡³ 3,400 ç¾å…ƒï¼Œç•¥é«˜æ–¼æœ€ä½å·¥è³‡ã€‚è€Œé€™é‚„æ˜¯ä»–å€‘æ¯å¤©å·¥ä½œè¶…é 13 å°æ™‚æ‰€æ›ä¾†çš„ã€‚ã€ï¼ˆæŒ‡å‡ºé•·å·¥æ™‚èˆ‡ä½åˆ©æ½¤çš„å›°å¢ƒæ²’æœ‰è§£æ±ºï¼‰'
                },
                'é«˜å½±éŸ¿_èœå–®': {
                    'success': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œå¦‚ä»Šï¼Œå†°ç¾å¼å’–å•¡åœ¨éŸ“èªä¸­è¢«æš±ç¨±ç‚ºã€ah-ahã€ï¼Œå¯èªªæ˜¯ä¸€ç¨®éå®˜æ–¹çš„åœ‹æ°‘é£²æ–™ã€‚ã€ï¼ˆåœ‹æ°‘é£²æ–™çš„å¸‚å ´åŸºçŸ³ç©©å›ºï¼Œéœ€è¦ä»¥æ­¤ç‚ºåŸºç¤é–‹ç™¼é«˜åˆ©æ½¤ç”¢å“ï¼‰',
                    'failure': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œé¢å°åœæ»¯ä¸å‰çš„å°±æ¥­å¸‚å ´å’Œåš´è‹›çš„è¾¦å…¬å®¤æ–‡åŒ–ï¼Œä¸€äº›éŸ“åœ‹äººå°‡é–‹è¨­å’–å•¡é¤¨è¦–ç‚ºä¸€æ¢é€šå¾€ç¨ç«‹çš„é“è·¯ã€‚ã€ï¼ˆå†æ¬¡æé†’è€é—†ï¼Œç«¶çˆ­ä¾†è‡ªæ€¥æ–¼è½‰è¡Œçš„é¾å¤§ç¾¤é«”ï¼‰'
                }
            },
            'ç§‹å­£': {
                'é«˜å½±éŸ¿_ç¤¾ç¾¤è¡ŒéŠ·': {
                    'success': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œåœ¨ç¾ä»Šç¤¾ç¾¤åª’é«”ä¸»å°çš„æ–‡åŒ–ä¸­ï¼Œå’–å•¡é¤¨çš„æˆåŠŸèˆ‡å¦ï¼Œå¾€å¾€å–æ±ºæ–¼å®ƒæ‹èµ·ä¾†å¥½ä¸å¥½çœ‹ï¼Œä»¥åŠç›¸é—œè²¼æ–‡ç²å¾—å¤šå°‘ç€è¦½æ¬¡æ•¸ï¼Œè€Œä¸æ˜¯å®ƒæä¾›ä»€éº¼ã€‚ã€ï¼ˆè­‰æ˜ç­–ç•¥æ–¹å‘èˆ‡å¸‚å ´è¶¨å‹¢å®Œå…¨å»åˆï¼‰',
                    'failure': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œå…‰æ˜¯æä¾›å¥½å’–å•¡é‚„ä¸å¤ ... è€é—†éœ€è¦äº†è§£è¡ŒéŠ·ã€å®¤å…§è¨­è¨ˆå’Œèœå–®é–‹ç™¼ï¼Œæ‰èƒ½è¿åˆæœ€æ–°è¶¨å‹¢ã€‚ã€ï¼ˆæŒ‡å‡ºå¤±æ•—åœ¨æ–¼ç¼ºä¹å¤šå…ƒç¶“ç‡Ÿèƒ½åŠ›ï¼‰'
                },
                'è² é¢_ç…§æ¬è¨­è¨ˆ': {
                    'success': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œå®¤å…§è¨­è¨ˆè¶¨å‹¢å¾ˆå¿«å°±æœƒæµè¡Œèµ·ä¾†ï¼Œå°è‡´è¨±å¤šåº—å®¶æ¡ç”¨ç›¸ä¼¼çš„ç¾å­¸é¢¨æ ¼ã€‚ã€ï¼ˆå³ä½¿æˆåŠŸï¼Œä¹Ÿæé†’å·®ç•°åŒ–ä»æ˜¯é•·ä¹…ä¹‹è¨ˆï¼‰',
                    'failure': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œå´”å…ˆç”Ÿèªªï¼Œé€™ä¹Ÿæ„å‘³è‘—è¨±å¤šå’–å•¡é¤¨å¯èƒ½ä¸å¤ªæ³¨é‡å’–å•¡æœ¬èº«çš„å“è³ªã€‚ã€ï¼ˆæŒ‡å‡ºç‚ºäº†è¿½æ±‚è¡¨è±¡è€ŒçŠ§ç‰²å“è³ªçš„é¢¨éšªï¼‰'
                }
            },
            'å†¬å­£': {
                'é«˜å½±éŸ¿_å¿ èª åº¦': {
                    'success': 'ã€æ•¸æ“šè³‡æ–™ã€‘ã€Œå…¨åœ‹ 5,100 è¬äººå£æ“æœ‰ 8 è¬å®¶å’–å•¡é¤¨ï¼Œå…¶ä¸­åƒ…é¦–çˆ¾å°±æœ‰ 1 è¬å¤šå®¶ã€‚ã€ï¼ˆåœ¨æ¥µç«¯é£½å’Œçš„å¸‚å ´ä¸­ï¼Œå¼·èª¿ç©©å›ºå›é ­å®¢çš„é‡è¦æ€§ï¼‰',
                    'failure': 'ã€æ•¸æ“šè³‡æ–™ã€‘ã€Œè¨±å¤šäººåœ¨ç¬¬ä¸€ä»½ç§Ÿç´„åˆ°æœŸå¾Œï¼Œä¹Ÿå°±æ˜¯åƒ…åƒ…ä¸€å…©å¹´å¾Œï¼Œå°±é¸æ“‡é€€å‡ºã€‚ä»–èªªï¼Œéš¨è‘—è¶Šä¾†è¶Šå¤šçš„å’–å•¡åº—é–‹æ¥­ï¼Œå®ƒå€‘çš„å£½å‘½ä¹Ÿè¶Šä¾†è¶ŠçŸ­ã€‚ã€ï¼ˆæŒ‡å‡ºå¸‚å ´æ®˜é…·çš„æ·˜æ±°ç‡ï¼‰'
                },
                'é«˜å½±éŸ¿_åƒ¹æ ¼ç«¶çˆ­': {
                    'success': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œå’–å•¡é¤¨è€é—†ä¹Ÿé¢è‡¨ä¾†è‡ªä½åƒ¹é€£é–åº—æ—¥ç›Šå¢é•·çš„å£“åŠ›ï¼Œå„˜ç®¡é€™äº›é€£é–åº—åœ¨ç”Ÿæ´»æˆæœ¬å’Œå’–å•¡è±†åƒ¹æ ¼ä¸Šæ¼²çš„æƒ…æ³ä¸‹ï¼Œä¹Ÿé›£ä»¥ç¶­æŒåˆ©æ½¤ã€‚ã€ï¼ˆè­‰æ˜ç­–ç•¥æœ‰æ•ˆæ‡‰å°äº†é€£é–åº—çš„åƒ¹æ ¼æˆ°ï¼‰',
                    'failure': 'ã€èª¿æŸ¥è³‡æ–™ã€‘ã€Œå¼µå…ˆç”Ÿèªªï¼Œä»–éå»åå¹´å·¥ä½œéçš„ä¸ƒå®¶å’–å•¡é¤¨ä¸­ï¼Œæœ‰äº”å®¶å·²ç¶“ä¸å¾©å­˜åœ¨ã€‚ã€æˆ‘å¸¸å¸¸æ„Ÿåˆ°çµ•æœ›ï¼Œä¸çŸ¥é“è‡ªå·±æ˜¯å¦é‚„èƒ½ç¹¼çºŒç•¶å’–å•¡å¸«ï¼Œã€ä»–èªªã€‚ã€ï¼ˆå¼·èª¿ç’°å¢ƒçš„çµ•æœ›æ„Ÿå’ŒæŒçºŒçš„å¤±æ•—ï¼‰'
                }
            }
        };

        const ENDINGS = {
            'ending0': {
                title: 'çµå±€ 1ï¼šçµ•æœ›çš„é€€å‡ºè€…',
                subtitle: 'ï¼ˆé«˜ç« æ´™è·¯ç·šï¼‰',
                dialogue: 'ã€Œå”‰â€¦ æˆ‘è½äº†ä½ çš„å»ºè­°ï¼Œä¹Ÿå˜—è©¦äº†è¨±å¤šæ”¹è®Šï¼Œä½†çµæœé‚„æ˜¯ä¸€æ¨£ã€‚æˆ‘çœ‹åˆ°åˆ¥äººçš„åº—å¤§æ’é•·éšŠï¼Œå°±ä»¥ç‚ºç¶“ç‡Ÿå’–å•¡åº—å¾ˆç°¡å–®ï¼Œä½†é€™ä»½å·¥ä½œçœŸçš„å¾ˆè¾›è‹¦ï¼Œåˆ©æ½¤ä¹Ÿéå¸¸å¾®è–„ã€‚æˆ‘å·²ç¶“å¸¸å¸¸æ„Ÿåˆ°çµ•æœ›äº†ï¼Œä¸çŸ¥é“è‡ªå·±æ˜¯å¦é‚„èƒ½ç¹¼çºŒç•¶å’–å•¡å¸«ã€‚é€™å¹¾å¹´ï¼Œæˆ‘é¢å°çš„ä¸åªæ˜¯å’–å•¡çš„å“è³ªï¼Œé‚„æœ‰ç„¡æ­¢å¢ƒçš„è¡ŒéŠ·ã€å®¤å…§è¨­è¨ˆå’Œä¾†è‡ªä½åƒ¹é€£é–åº—çš„å£“åŠ›ã€‚ç¾åœ¨ï¼Œæˆ‘çš„ç§Ÿç´„ä¹Ÿå¿«åˆ°æœŸäº†... å¦‚æœèƒ½é‡ä¾†ï¼Œæˆ‘ä»€éº¼éƒ½é¡˜æ„åšï¼Œå°±æ˜¯ä¸æœƒé–‹å’–å•¡é¤¨ã€‚ è¬è¬ä½ ï¼Œä½†æˆ‘æ±ºå®šé€€å‡ºäº†ï¼Œå’–å•¡é¤¨ä¸æ˜¯è‡´å¯Œçš„åœ°æ–¹ï¼Œå®ƒåªæ˜¯ä¸€å€‹å¯ä»¥å»å–å’–å•¡çš„åœ°æ–¹ã€‚ã€'
            },
            'ending1': {
                title: 'çµå±€ 2ï¼šè‹¦æ’çš„ç”Ÿå­˜è€…',
                subtitle: 'ï¼ˆå´”å–„æ—­çš„å®¢æˆ¶è·¯ç·šï¼‰',
                dialogue: 'ã€Œä½ çµ¦çš„å»ºè­°å¹«åŠ©æˆ‘åº¦éäº†å¹¾å€‹é›£é—œï¼Œç‰¹åˆ¥æ˜¯åœ¨ç¤¾ç¾¤åª’é«”å’Œæˆæœ¬æ§åˆ¶æ–¹é¢ã€‚æˆ‘çš„åº—ç¾åœ¨ç®—æ˜¯å‹‰å¼·ç¶­æŒæ”¶æ”¯å¹³è¡¡äº†ã€‚ consultant å´”å–„æ—­èªªçš„æ²’éŒ¯ï¼Œæˆ‘å€‘é€™äº›é€²å…¥é€™è¡Œçš„äººï¼Œå¤§å¤šæ²’æœ‰åšå¥½æº–å‚™ã€‚æˆ‘ç¢ºå¯¦æ¯å¤©å·¥ä½œè¶…é 13 å°æ™‚ï¼Œæ¯å€‹æœˆçš„æ·¨æ”¶å…¥ä¹Ÿåªæ¯”æœ€ä½å·¥è³‡é«˜ä¸€é»é»ã€‚æˆ‘å·²ç¶“è³£æ‰äº†æˆ‘æœ€è²´çš„å’–å•¡è±†ï¼Œè½‰è€Œå°ˆæ³¨æ–¼é‚£æ¯éå®˜æ–¹çš„åœ‹æ°‘é£²æ–™â€”â€”å†°ç¾å¼ã€‚æˆ‘æœƒç¹¼çºŒåŠªåŠ›ï¼Œä½†é€™ä»½å·¥ä½œçš„è¾›è‹¦ç¨‹åº¦ï¼Œåªæœ‰çœŸæ­£ç¶“ç‡Ÿéçš„äººæ‰æ˜ç™½ã€‚ è¬è¬ä½ çš„å¹«åŠ©ï¼Œæˆ‘é‚„æœƒå†æ’ä¸€é™£å­ã€‚ã€'
            },
            'ending2': {
                title: 'çµå±€ 3ï¼šæˆåŠŸçš„å¼„æ½®å…’',
                subtitle: 'ï¼ˆç¨€æœ‰æ¡ˆä¾‹ï¼‰',
                dialogue: 'ã€Œå¤ªæ„Ÿè¬ä½ äº†ï¼æˆ‘çš„åº—ç¾åœ¨çœŸçš„åœ¨æˆ‘å€‘çš„ç¤¾å€ä¸­è„«ç©è€Œå‡ºäº†ã€‚æˆ‘å€‘æˆåŠŸçš„æ‰“é€ äº†é‚£å€‹Instagrammableçš„æ‰“å¡é»ï¼Œå¼•é ˜äº†æ½®æµç”œé»ï¼Œè€Œä¸”é¡§å®¢å€‘ä¹Ÿé–‹å§‹å°‡æˆ‘çš„åº—ä½œç‚ºä»–å€‘æ™šé¤å¾Œæµé€£ã€ç¨è‡ªæ»‘æ‰‹æ©Ÿçš„èˆ’é©ç©ºé–“ã€‚æˆ‘ç¾åœ¨æ˜ç™½ï¼Œå…‰æ˜¯æä¾›å¥½å’–å•¡æ˜¯ä¸å¤ çš„ï¼Œå¿…é ˆç†è§£è¡ŒéŠ·ã€å®¤å…§è¨­è¨ˆå’Œèœå–®é–‹ç™¼ã€‚ç•¶åˆæˆ‘çœ‹åˆ°é–€å‰å¤§æ’é•·éšŠæ™‚ï¼Œä»¥ç‚ºè³ºéŒ¢å¾ˆå®¹æ˜“ï¼Œç¾åœ¨æˆ‘çŸ¥é“æˆåŠŸä¾†è‡ªä¸æ–·çš„é©æ‡‰å’Œå°ˆæ³¨ã€‚ æˆ‘çµ‚æ–¼æ“ºè„«äº†æœä¹æ™šäº”çš„ç”Ÿæ´»ï¼Œä½†é€™ä¸æ˜¯çµæŸï¼Œè€Œæ˜¯å¦ä¸€å€‹æŒ‘æˆ°çš„é–‹å§‹ï¼ã€'
            }
        };

        // ==================== éŠæˆ²ç‹€æ…‹ ====================
        let gameState = {
            currentRound: 0,
            cumulativeScore: 0,
            selectedOptions: {
                'è£æ½¢': null,
                'èœå–®': null,
                'å“ç®¡': null
            },
            roundScores: [],
            eventOccurred: false,
            currentEvent: null,
            eventModifiers: {}
        };

        // ==================== è¼”åŠ©å‡½æ•¸ ====================
        function getRandomEvent() {
            const availableEvents = EVENTS.filter(e => !e.used);
            if (availableEvents.length === 0) return null;
            
            const event = availableEvents[Math.floor(Math.random() * availableEvents.length)];
            event.used = true;
            return event;
        }

        function calculateEventModifiers(event, season) {
            const modifiers = {};
            event.modifiers.forEach(mod => {
                if (mod.season === season) {
                    const key = `${mod.category}-${mod.option}`;
                    modifiers[key] = mod.delta;
                }
            });
            return modifiers;
        }

        function getOptionScore(season, category, option) {
            let score = BASE_SCORES[season][category][option];
            
            if (gameState.eventModifiers) {
                const key = `${category}-${option}`;
                if (gameState.eventModifiers[key] !== undefined) {
                    score += gameState.eventModifiers[key];
                }
            }
            
            return score;
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(el => el.classList.add('hidden'));
            document.getElementById(screenId).classList.remove('hidden');
        }

        function resetSelections() {
            gameState.selectedOptions = {
                'è£æ½¢': null,
                'èœå–®': null,
                'å“ç®¡': null
            };
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.getElementById('submitBtn').disabled = true;
        }

        // ==================== éŠæˆ²æµç¨‹ ====================
        function startGame() {
            gameState.currentRound = 0;
            gameState.cumulativeScore = 0;
            gameState.roundScores = [];
            EVENTS.forEach(e => e.used = false);
            nextRound();
        }

        function nextRound() {
            gameState.currentRound++;
            
            if (gameState.currentRound > 4) {
                showEnding();
                return;
            }

            resetSelections();
            gameState.eventModifiers = {};
            gameState.eventOccurred = false;
            gameState.currentEvent = null;

            // 50% æ©Ÿç‡è§¸ç™¼äº‹ä»¶
            if (Math.random() < 0.5) {
                gameState.currentEvent = getRandomEvent();
                if (gameState.currentEvent) {
                    gameState.eventOccurred = true;
                    const season = SEASONS[gameState.currentRound - 1];
                    gameState.eventModifiers = calculateEventModifiers(gameState.currentEvent, season);
                }
            }

            showRound();
        }

        function showRound() {
            const season = SEASONS[gameState.currentRound - 1];
            
            // æ›´æ–°é¡¯ç¤º
            document.getElementById('seasonBadge').textContent = season;
            document.getElementById('cumulativeScore').textContent = gameState.cumulativeScore + ' åˆ†';
            document.getElementById('roundsProgress').textContent = `${gameState.currentRound} / 4`;

            // é¡¯ç¤ºå­£ç¯€æè¿°
            const descBox = document.getElementById('seasonDescription');
            descBox.innerHTML = `<div class="speaker-name">é«˜ç« æ´™ï¼š</div><div>${SEASON_DESCRIPTIONS[season]}</div>`;

            // é¡¯ç¤ºäº‹ä»¶ï¼ˆå¦‚æœ‰ï¼‰
            const eventContainer = document.getElementById('eventContainer');
            eventContainer.innerHTML = '';
            if (gameState.eventOccurred && gameState.currentEvent) {
                eventContainer.innerHTML = `
                    <div class="event-notice">
                        <div class="event-title">âš ï¸ äº‹ä»¶ï¼š${gameState.currentEvent.name}</div>
                        <div class="speaker-name">é«˜ç« æ´™ï¼š</div>
                        <div>${gameState.currentEvent.description}</div>
                    </div>
                    <div class="system-message">
                        [ç³»çµ±ï¼šæ­¤äº‹ä»¶æœƒå½±éŸ¿éƒ¨åˆ†é¸é …çš„åˆ†æ•¸]
                    </div>
                `;
            } else {
                eventContainer.innerHTML = `
                    <div class="system-message">
                        [ç³»çµ±ï¼šå¹¸å¥½ä»Šå¤©æ²’å‡ºä»€éº¼å¤§äº‚å­ï¼Œä½†ç«¶çˆ­çš„å£“åŠ›ä¾èˆŠå¾ˆå¤§â€¦]
                    </div>
                `;
            }

            // ç”Ÿæˆé¸é …
            generateOptions(season);

            showScreen('gameScreen');
        }

        function generateOptions(season) {
            const categories = ['è£æ½¢', 'èœå–®', 'å“ç®¡'];
            const options = ['A', 'B', 'C'];

            categories.forEach(category => {
                const container = document.getElementById(
                    category === 'è£æ½¢' ? 'decorationOptions' :
                    category === 'èœå–®' ? 'menuOptions' :
                    'qualityOptions'
                );
                container.innerHTML = '';

                options.forEach(option => {
                    const score = getOptionScore(season, category, option);
                    const baseScore = BASE_SCORES[season][category][option];
                    const hasModifier = score !== baseScore;
                    
                    let scoreDisplay = formatScore(score);
                    if (hasModifier) {
                        const modifier = score - baseScore;
                        scoreDisplay = `${formatScore(baseScore)} â†’ ${formatScore(score)}`;
                    }

                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerHTML = `
                        <div class="option-label">é¸é … ${option}</div>
                        <div class="option-text">${OPTIONS_TEXT[season][category][option]}</div>
                    `;
                    
                    btn.onclick = () => selectOption(category, option, btn);
                    container.appendChild(btn);
                });
            });
        }

        function formatScore(score) {
            if (score > 0) return `+${score}`;
            return `${score}`;
        }

        function selectOption(category, option, btn) {
            // ç§»é™¤åŒåˆ†é¡çš„å…¶ä»–é¸é …é¸æ“‡
            const container = btn.parentElement;
            container.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
            
            // é¸æ“‡æ­¤é¸é …
            btn.classList.add('selected');
            gameState.selectedOptions[category] = option;
            
            // æª¢æŸ¥æ˜¯å¦ä¸‰å€‹éƒ½é¸å¥½äº†
            if (gameState.selectedOptions['è£æ½¢'] && gameState.selectedOptions['èœå–®'] && gameState.selectedOptions['å“ç®¡']) {
                document.getElementById('submitBtn').disabled = false;
            }
        }

        function submitRound() {
            const season = SEASONS[gameState.currentRound - 1];
            const categories = ['è£æ½¢', 'èœå–®', 'å“ç®¡'];
            
            let roundScore = 0;
            const breakdown = [];
            
            categories.forEach(category => {
                const option = gameState.selectedOptions[category];
                const score = getOptionScore(season, category, option);
                roundScore += score;
                breakdown.push({ category, option, score });
            });

            gameState.roundScores.push(roundScore);
            const prevCumulative = gameState.cumulativeScore;
            gameState.cumulativeScore += roundScore;

            showRoundResult(season, roundScore, breakdown, prevCumulative);
        }

        function getFeedbackType(season, breakdown) {
            // æ‰¾å‡ºåˆ†æ•¸æœ€é«˜çš„é¸é …
            let maxScore = -Infinity;
            let maxBreakdown = null;
            
            breakdown.forEach(b => {
                if (b.score > maxScore) {
                    maxScore = b.score;
                    maxBreakdown = b;
                }
            });

            if (!maxBreakdown) return null;

            const category = maxBreakdown.category;
            const option = maxBreakdown.option;

            // æ ¹æ“šå­£ç¯€å’Œé¸é …åˆ¤æ–·åé¥‹é¡å‹
            if (season === 'æ˜¥å­£') {
                if ((category === 'è£æ½¢' && option === 'A') || (category === 'èœå–®' && option === 'A')) {
                    return 'é«˜å½±éŸ¿_ç¤¾äº¤è¨­è¨ˆ';
                } else if (category === 'å“ç®¡' && option === 'C') {
                    return 'é«˜å½±éŸ¿_æˆæœ¬æ§åˆ¶';
                }
            } else if (season === 'å¤å­£') {
                if ((category === 'è£æ½¢' && option === 'B') || (category === 'å“ç®¡' && option === 'A')) {
                    return 'é«˜å½±éŸ¿_æ•ˆç‡åŸ¹è¨“';
                } else if (category === 'èœå–®' && option === 'A') {
                    return 'é«˜å½±éŸ¿_èœå–®';
                }
            } else if (season === 'ç§‹å­£') {
                if ((category === 'è£æ½¢' && (option === 'A' || option === 'B')) || 
                    (category === 'èœå–®' && option === 'C') || 
                    (category === 'å“ç®¡' && option === 'A')) {
                    return 'é«˜å½±éŸ¿_ç¤¾ç¾¤è¡ŒéŠ·';
                } else if (category === 'è£æ½¢' && option === 'A') {
                    return 'è² é¢_ç…§æ¬è¨­è¨ˆ';
                }
            } else if (season === 'å†¬å­£') {
                if ((category === 'è£æ½¢' && option === 'C') || (category === 'å“ç®¡' && option === 'A')) {
                    return 'é«˜å½±éŸ¿_å¿ èª åº¦';
                } else if (category === 'èœå–®' && option === 'A') {
                    return 'é«˜å½±éŸ¿_åƒ¹æ ¼ç«¶çˆ­';
                }
            }

            return null;
        }

        function getRoundFeedback(season, isSuccess, feedbackType) {
            if (!feedbackType || !ROUND_FEEDBACK[season] || !ROUND_FEEDBACK[season][feedbackType]) {
                return null;
            }

            const resultKey = isSuccess ? 'success' : 'failure';
            return ROUND_FEEDBACK[season][feedbackType][resultKey];
        }

        function showRoundResult(season, roundScore, breakdown, prevCumulative) {
            const isSuccess = roundScore >= 7;
            let html = '';

            if (isSuccess) {
                html = `
                    <div class="result-section">
                        <div class="result-title">âœ“ æœ¬å­£æˆåŠŸï¼</div>
                        <div class="result-score success">æœ¬å­£ç¸½åˆ†ï¼š${roundScore} åˆ†ï¼ˆâ‰¥ 7 åˆ†ï¼‰</div>
                    </div>
                    <div class="dialogue-box">
                        <div class="speaker-name">é«˜ç« æ´™ï¼š</div>
                        <div>ã€Œé€™äº›å»ºè­°å¤ªæ£’äº†ï¼æˆ‘å€‘é–‹å§‹çœ‹åˆ°ä¸€äº›èµ·è‰²äº†ï¼Œé¡§å®¢æœ‰æ‰€å›æµï¼Œé‚£äº›å¤§æ’é•·é¾çš„éŒ¯è¦ºä¼¼ä¹é–‹å§‹å¯¦ç¾äº†ï¼è¬è¬ä½ ï¼è®“æˆ‘å€‘é€²å…¥ä¸‹ä¸€å­£ï¼Œæˆ‘é‚„éœ€è¦ä½ ï¼ã€</div>
                    </div>
                `;
            } else {
                html = `
                    <div class="result-section">
                        <div class="result-title">âœ— æœ¬å­£è™§æ</div>
                        <div class="result-score failure">æœ¬å­£ç¸½åˆ†ï¼š${roundScore} åˆ†ï¼ˆ< 7 åˆ†ï¼‰</div>
                    </div>
                    <div class="dialogue-box">
                        <div class="speaker-name">é«˜ç« æ´™ï¼ˆçµ•æœ›åœ°å˜†æ°£ï¼‰ï¼š</div>
                        <div>ã€Œé€™çœŸçš„å¤ªé›£äº†ï¼Œæˆ‘å€‘çš„åŠªåŠ›é‚„ä¸å¤ ã€‚åœ¨é€™å€‹è¶…é 50 å®¶ç«¶çˆ­è€…çš„å¸‚å ´è£¡ï¼Œæ²’æœ‰è¾¦æ³•å¿«é€Ÿå¼•èµ·çˆ†ç‚¸æ€§çš„åæ‡‰ï¼Œæ ¹æœ¬ç„¡æ³•ç”Ÿå­˜ã€‚æˆ‘çš„ç¾é‡‘æµæ’ä¸ä½äº†ï¼Œåœ¨ç§Ÿç´„åˆ°æœŸå‰ï¼Œæˆ‘å°±å¾—é€€å‡ºã€‚è¬è¬ä½ çš„å¿ƒæ„ï¼Œä½†æˆ‘å·²ç¶“æ±ºå®šäº†... å¦‚æœèƒ½é‡ä¾†ï¼Œæˆ‘ä»€éº¼éƒ½é¡˜æ„åšï¼Œå°±æ˜¯ä¸æœƒé–‹å’–å•¡é¤¨ã€‚ã€</div>
                    </div>
                `;
                document.getElementById('nextBtn').onclick = () => nextRound();
            }

            html += `
                <div class="score-breakdown">
                    <div style="font-weight: bold; margin-bottom: 10px;">æœ¬å­£é¸æ“‡åˆ†æï¼š</div>
                    ${breakdown.map(b => `
                        <div class="breakdown-row">
                            <span class="breakdown-label">${b.category} (é¸é … ${b.option})ï¼š</span>
                            <span class="breakdown-value">${formatScore(b.score)}</span>
                        </div>
                    `).join('')}
                    <div class="breakdown-row breakdown-total">
                        <span>æœ¬å­£ç¸½åˆ†ï¼š</span>
                        <span>${formatScore(roundScore)}</span>
                    </div>
                    <div class="breakdown-row">
                        <span>ç´¯ç©ç¸½åˆ†ï¼š</span>
                        <span>${prevCumulative} â†’ ${gameState.cumulativeScore} åˆ†</span>
                    </div>
                </div>
            `;

            // æ·»åŠ ç”¢æ¥­åé¥‹è³‡æ–™
            const feedbackType = getFeedbackType(season, breakdown);
            const feedback = getRoundFeedback(season, isSuccess, feedbackType);
            if (feedback) {
                html += `
                    <div style="background: #F0F8FF; border-left: 5px solid #2C5F7F; padding: 15px; margin: 15px 0; border-radius: 5px; font-size: 14px; line-height: 1.6; color: #333;">
                        ${feedback}
                    </div>
                `;
            }

            document.getElementById('resultContent').innerHTML = html;
            
            if (!isSuccess) {
                document.getElementById('nextBtn').textContent = 'ç¹¼çºŒéŠæˆ²';
            } else {
                document.getElementById('nextBtn').textContent = 'é€²å…¥ä¸‹ä¸€å­£';
            }
            
            document.getElementById('nextBtn').onclick = () => nextRound();

            showScreen('resultScreen');
        }

        function showEnding() {
            let endingKey;
            let endData;
            
            if (gameState.cumulativeScore <= 4) {
                endingKey = 'ending0';
            } else if (gameState.cumulativeScore >= 5 && gameState.cumulativeScore <= 18) {
                endingKey = 'ending1';
            } else {
                endingKey = 'ending2';
            }
            
            endData = ENDINGS[endingKey];
            
            document.getElementById('endContent').innerHTML = `
                <div class="result-section">
                    <div class="result-title">${endData.title}</div>
                    <div style="font-size: 14px; color: #666; margin-top: 8px;">${endData.subtitle}</div>
                    <div class="result-score" style="margin-top: 15px;">æœ€çµ‚ç´¯ç©ç¸½åˆ†ï¼š${gameState.cumulativeScore} åˆ†</div>
                </div>
                <div class="ending-dialogue">
                    <div class="speaker-name">é«˜ç« æ´™ï¼š</div>
                    <div>${endData.dialogue}</div>
                </div>
            `;
            
            document.getElementById('nextBtn').textContent = 'é‡æ–°é–‹å§‹';
            document.getElementById('nextBtn').onclick = () => location.reload();
            showScreen('endScreen');
        }
    </script>
</body>
</html>
